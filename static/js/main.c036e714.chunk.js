(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),s=a(16),i=a(13),l=a(48),u=a(11),m="GET_BROWSER_GEO",f={fetching:!0},d="FETCH_FORECAST",E={units:"c",fetching:!0},g=Object(i.c)({browserGeo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_GEO":return Object(u.a)({},e,n);case"FETCH_ERROR":return Object(u.a)({},e,{error:n,fetching:!1});case"CLEAR_GEO":return Object(u.a)({},e,{lat:"",lon:"",fetching:!0});case"SUCCESS_FETCH":return Object(u.a)({},e,{fetching:n});default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_ERROR":return Object(u.a)({},e,{error:n,fetching:!1});case"STORE_FORECAST":return Object(u.a)({},e,n);case"CHANGE_UNITS":return Object(u.a)({},e,{units:n,fetching:!0});case"SUCCESS_FETCH":return Object(u.a)({},e,{fetching:n});default:return e}}}),p=i.d,h=a(18),v=a.n(h),b=a(15),O=function(e){return{type:"SET_GEO",payload:e}},w=function(e){return{type:"STORE_FORECAST",payload:e}},N=function(e){return{type:"CHANGE_UNITS",payload:e}},j=function(){return{type:"SUCCESS_FETCH",payload:!1}},y=function(e){return{type:"FETCH_ERROR",payload:e}},C=a(33),S=a.n(C),k=a(46),R=a.n(k),_=function(e){var t="https://weather-ydn-yql.media.yahoo.com/forecastrss",a=Object(u.a)({},e,{format:"json"}),n={oauth_consumer_key:"dj0yJmk9ZTNuazJlN0hienFOJnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM3",oauth_nonce:Math.random().toString(36).substring(2),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:parseInt((new Date).getTime()/1e3).toString(),oauth_version:"1.0"},r=Object(u.a)({},a,n),c=Object.keys(r).sort().map(function(e){return[e+"="+encodeURIComponent(r[e])]}),o="GET&"+encodeURIComponent(t)+"&"+encodeURIComponent(c.join("&")),s=encodeURIComponent("6b83f715469297ccd168e70b878ee2dbe2a54ee9")+"&",i=S.a.HmacSHA1(o,s).toString(S.a.enc.Base64);n.oauth_signature=i;var l="OAuth "+Object.keys(n).map(function(e){return[e+'="'+n[e]+'"']}).join(","),m=new URLSearchParams(Object.entries(a)),f={headers:{Authorization:l,"X-Yahoo-App-Id":"hRQ8Gy52"}};return new Promise(function(e){return e(R.a.get("".concat(t,"?").concat(m.toString()),f))}).then(function(e){return e.data})},x=v.a.mark(U),F=v.a.mark(H),T=v.a.mark(I),G=v.a.mark(P),A=function(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){return e(t)},function(e){return t(e)})})};function U(){var e,t,a,n;return v.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(b.b)(A);case 3:return e=r.sent,t=e.coords,a=t.latitude,n=t.longitude,r.next=7,Object(b.c)(O({lat:a,lon:n}));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,Object(b.c)(y(r.t0.message));case 13:case"end":return r.stop()}},x,null,[[0,9]])}function H(e){var t;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(b.b)(_,e.payload);case 3:return t=a.sent,a.next=6,Object(b.c)(w(t));case 6:return a.next=8,Object(b.c)(j());case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(b.c)(y("Some error while getting forecast"));case 14:case"end":return a.stop()}},F,null,[[0,10]])}function I(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(m,U);case 2:return e.next=4,Object(b.d)(d,H);case 4:case"end":return e.stop()}},T)}function P(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([I()]);case 2:case"end":return e.stop()}},G)}var W=Object(l.a)();var M=a(8),B=a(10),J=function(e){var t,a=e.forecast,n=e.units;return r.a.createElement("div",{className:"forecast-item"},r.a.createElement("div",{className:"forecast-temprature"},r.a.createElement("p",{className:"forecast-temprature-data"},a.high,"\xb0 ",n),r.a.createElement("p",{className:"forecast-temprature-weather"},a.text)),r.a.createElement("div",{className:"forecast-date"},r.a.createElement("h5",null,(t=a.date,new Date(1e3*t).toLocaleString("en",{weekday:"long"}))),r.a.createElement("p",null,function(e){return new Date(1e3*e).toLocaleString("en",{month:"long",day:"numeric"})}(a.date))))};J.defaultProps={units:"c"};var Q=Object(s.b)(function(e){return{units:e.forecast.units}})(J),z=function(){return r.a.createElement("div",{className:"preloader-layout"},r.a.createElement("div",{id:"loader"},r.a.createElement("div",{className:"cloud"},r.a.createElement("div",{className:"cloud-base"},r.a.createElement("div",{className:"cloud-small-part"}),r.a.createElement("div",{className:"cloud-big-part"}))),r.a.createElement("div",{className:"sun"},r.a.createElement("div",{className:"sun-beams1"}),r.a.createElement("div",{className:"sun-beams2"}),r.a.createElement("div",{className:"sun-beams3"}),r.a.createElement("div",{className:"sun-beams4"}),r.a.createElement("div",{className:"sun-beams5"}),r.a.createElement("div",{className:"sun-beams6"})),r.a.createElement("div",{className:"teardrops"},r.a.createElement("div",{className:"teardrop1"},r.a.createElement("svg",{width:"80%",viewBox:"0 0 30 42"},r.a.createElement("path",{fill:"lightblue",stroke:"lightblue",strokeWidth:"1.5",d:"M15 3\r Q16.5 6.8 25 18\r A12.8 12.8 0 1 1 5 18\r Q13.5 6.8 15 3z"}))),r.a.createElement("div",{className:"teardrop2"},r.a.createElement("svg",{width:"80%",viewBox:"0 0 30 42"},r.a.createElement("path",{fill:"lightblue",stroke:"lightblue",strokeWidth:"1.5",d:"M15 3\r Q16.5 6.8 25 18\r A12.8 12.8 0 1 1 5 18\r Q13.5 6.8 15 3z"}))))))},L=function(e){var t=e.geo,a=e.getForecast,c=e.forecast,o=e.units,s=e.isFetching,i=t.lat,l=t.lon,u=c.location,m=c.forecasts;return Object(n.useEffect)(function(){s&&i&&l&&a({lat:i,lon:l,u:o})},[a,i,l,o,s]),r.a.createElement("div",{className:"forecast"},r.a.createElement("p",null,"Weather at ",r.a.createElement("span",null,u&&u.city)),s&&r.a.createElement(z,null),r.a.createElement("div",{className:"forecast-list-wrapper"},r.a.createElement("div",{className:"forecast-list"},!s&&m&&m.length&&m.map(function(e){return r.a.createElement(Q,{key:e.date,forecast:e})}))))};L.defaultProps={geo:{},forecast:{},units:"c",isFetching:!0};var Z=Object(s.b)(function(e){return{geo:e.browserGeo,forecast:e.forecast,units:e.forecast.units,isFetching:e.forecast.fetching||e.browserGeo.fetching}},function(e){return{getForecast:function(t){return e({type:d,payload:t})},toggleUnits:function(t){return e(N(t))}}})(L),D=function(e){var t=e.units,a=e.toggleUnits,n=e.resetGeo;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"settings-block"},r.a.createElement("p",{className:"settings-title"},"Units"),r.a.createElement("div",{className:"settings-units"},r.a.createElement("div",{onClick:function(){return a("c")},className:"c"===t?"active":""},"c"),r.a.createElement("div",{onClick:function(){return a("f")},className:"f"===t?"active":""},"f"))),r.a.createElement("div",{className:"settings-block"},r.a.createElement("p",{className:"settings-title"},"System settings"),r.a.createElement("button",{className:"settings-reset",onClick:n},"Reset Cache")))};D.defaultProps={units:"c"};var X=Object(s.b)(function(e){return{units:e.forecast.units}},function(e){return{toggleUnits:function(t){return e(N(t))},resetGeo:function(){return e({type:"CLEAR_GEO"})}}})(D),Y=function(){return r.a.createElement("div",null,"NotFound")},q=a(34),V=function(){return r.a.createElement("nav",{className:"menu"},r.a.createElement(q.a,{to:"/"},r.a.createElement("h1",null,"The best Weather Forecast we ever made")),r.a.createElement(q.a,{to:"/settings"},r.a.createElement("i",{className:"fas fa-cog"})))},$=function(e){var t=e.message;return r.a.createElement("div",{className:"error-block"},r.a.createElement("p",null,t))},K=Object(B.a)(),ee=function(e){var t=e.fetchGeo,a=e.geo,c=e.geoError,o=e.forecastError,s=a.lat,i=a.lon;Object(n.useEffect)(function(){!s&&!i&&t()},[t,s,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.b,{history:K},r.a.createElement(V,null),c?r.a.createElement($,{message:c}):r.a.createElement(function(){return r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/",exact:!0,component:function(){return o?r.a.createElement($,{message:o}):r.a.createElement(Z,null)}}),r.a.createElement(M.a,{path:"/settings",component:X}),r.a.createElement(M.a,{path:"*",component:Y}))},null)))};ee.defaultProps={geo:{},geoError:"",forecastError:""};var te=Object(s.b)(function(e){return{geo:e.browserGeo,isForecastFetching:e.forecast.fetching,geoError:e.browserGeo.error,forecastError:e.browserGeo.error}},function(e){return{fetchGeo:function(){return e({type:m})}}})(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);var ae=function(){var e=p(Object(i.a)(W)),t=Object(i.e)(g,e);return W.run(P),t}();o.a.render(r.a.createElement(s.a,{store:ae},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},49:function(e,t,a){e.exports=a(107)}},[[49,1,2]]]);
//# sourceMappingURL=main.c036e714.chunk.js.map